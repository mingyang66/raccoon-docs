##### Java module-info模块系统

> 从Java9开始引入了模块系统（Jigsaw项目），用于更好的管理代码依赖和封装性。模块系统允许你定义模块，并指定模块之间的依赖关系，以及哪些包应该被到处或暴露给其它模块。

###### 一、Java模块

假设我们有两个模块：module-a和module-b,下面我们定义源代码和模块描述文件module-info.java

```sh
# 目录结构
my-project/
├── module-a/
│   ├── src/
│   │   └── main/
│   │       └── java/
│   │           └── com/
│   │               └── example/
│   │                   └── modulea/
│   │                       └── ClassA.java
│   └── module-info.java
└── module-b/
    ├── src/
    │   └── main/
    │       └── java/
    │           └── com/
    │               └── example/
    │                   └── moduleb/
    │                       └── ClassB.java
    └── module-info.java
```

1. 在每个模块的根目录下创建module-info.java文件，这个文件定义了模块名称、到处的包级所需的依赖。

module-a/module-info.java

```java
// 声明模块
module module.a {
    exports com.example.modulea;
}
```

module-b/module-info.java

```java
// 声明模块
module module.b {
    requires module.a;
    exports com.example.moduleb;
}
```

- requires：依赖其它模块导出的包；
- exports：导出指定的包，供其它模块依赖使用；
- module module.b声明了一个名为module.b的模块；

###### 二、模块中未定义module-info.java

模块中如果未定义module-info.java，那么我们在自己的项目中通过module-info.java定义依赖的时候是否可以使用？

```sh
答案：是可以的，如依赖的包名为a-b-c-starter，则系统自动会解析成模块名为a.b.c.starter,此模块中的所有包都导出
```

###### 三、模块module-info.java定义模块名有没有指定的规则

官方没有明确指定具体的命名规则，只要遵从通用准则一般不会有问题，如：唯一性、建议小写字母、点号分割、允许字母数字混合。

反例：[druid-spring-boot-3-starter](https://github.com/alibaba/druid/tree/master/druid-spring-boot-3-starter)在版本1.2.23版本及之前是没有定义module-info.java的，模块名会本默认解析为druid.spring.boot.3.starter，这样就是一个错误的模块名，会报如下错误提示：

```sh
package 'com.alibaba.druid.spring.boot3.autoconfigure.stat' is declared in module with an invalid name ('druid.spring.boot.3.starter')
```

