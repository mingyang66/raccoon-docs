##### Mysql常用函数及技巧

###### 一、round()函数

round()函数用于将数字四射侮辱到指定的小数位，语法如下：

```sql
round(number, decimals)
```

- number：要四舍五入的数字。
- decimals：要保留的小数位数，如果省略此参数，则会四舍五入到最接近的整数。

示例：

```sql
SELECT ROUND(123.4567); //123
SELECT ROUND(123.4567, 2); //123.46
```

###### 二、lpad和rpad字符串函数

用于在字符串左侧和右侧填充指定的字符，知道达到指定的长度

- lpad(str, len, padStr) 函数str是原始字符串，len是返回的字符串的长度，padStr是要填充的字符串，填充从左侧开始。
- rpad(str, len, padStr) 函数str是原始字符串，len是返回的字符串的长度，padStr是要填充的字符串，填充从右侧开始。

示例如下：

```sql
select
	lpad(f.time, 6, '0'),
	rpad(f.time, 6, '0') 
from
	fund f
```

###### 三、lengh()和char_length()函数

lenght()函数在mysql中用于返回字符串的从航都，它返回的是字符串的字节数，而不是字符数，如果是UTF-8编码的多字节字符串，那么一个字符可能栈多个字节，如：汉字

示例：

```sql
SELECT length('123SD');//5
SELECT length('资金明细');//12
SELECT length(null);//null
```

如果数据库中使用的是多字节字符集（如：汉字），并且是想获取字符数而不是字节数，那就使用char_length()函数，示例如下：

```sql
select char_length('123SD');//5
select char_length('资金明细');//4 
select char_length(null);//null
```

> 在使用length和char_length的时候如果是null则会返回null，可以使用ifnull或coalesce函数来处理。

###### 四、substring和substr函数

mysql中的substring和substr函数是等价的，它们用于从一个字符串中提取子字符串。

语法如下：

```sql
substring(str, pos, len)
substr(str, pos, len)
```

- str：要从中提取子字符串的原始字符串。
- pos：开始提起的位置（基于1的索引）。
- len：（可选）要提取的字符串，如果省略，则返回从pos到字符串末尾的所有字符串。

示例如下：

```sql
select substring('2024061100100000', 1, 10); //2024061100
select substring('2024061100100000', 11, 6); //100000
select substring('2024061100100000', -6, 3);//100
select substring('2024061100100000', -6, -3);//空字符串

select substr('2024061100100000', 1, 10); //2024061100
select substr('2024061100100000', 11, 6); //100000
select substr('2024061100100000', -2, 3);//00
select substr('2024061100100000', -6, -3);//空字符串
```

注意：

- 如果pos的值大于字符串的长度，或者pos和len的组合导致超出字符串范围，则返回空字符串。
- 如果len是负值，函数将返回一个空字符串。

###### 五、concat和concat_ws函数

concat函数用于连接两个或多个字符串，示例如下：

```sql
select concat('sd-','23','-233');//sd-23-233
select concat('sd-','23', ''); //sd-23
select concat('sd-','23',null);//null
select concat('sd-','23',ifnull(null,''));//sd-23
```

注意：

- 如果连接的属性有一个为null，则会返回null，可以使用ifnull和coalesce函数来处理null值问题；

concat_ws函数用于连接两个或多个字符串，并在他们之间插入一个指定的分隔符，如果任何参数为null，则会忽略此参数。

语法如下：

```sql
concat_ws(分隔符，参数1，参数2，...)
```

示例如下：

```sql
select concat_ws('-','dd','s'); //dd-s
select concat_ws('-','dd','s', null);//dd-s
```

###### 六、max和min函数

max和min是聚合函数用于获取数据库中某一列的最大或最小的值，示例如下：

```sql
select max(f.price) from sales f
select min(f.price) from sales f
```

